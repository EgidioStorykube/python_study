{% extends "base.html" %}
{% block title %}Todo Edit{% endblock %}
{% block navbar %}
{% include 'navbar.html' %}
{% endblock %}
{% block content %}
<div class="container">
  <h1>Todo Edit</h1>
  <form action="/todo_list_tool/{{todo.id}}/update" method="post" class="d-flex flex-column gap-2">
    <label for="todo_title_update"><h3>Title:</h3></label>
    <textarea type="text" name="todo_title_update">{{todo.title}}</textarea>
    <label for="todo_description_update"><h3>Description:</h3></label>
    <textarea type="text" name="todo_description_update" rows="4">{{todo.description}}</textarea>
    <!-- <span class="fw-bold">Do you want it to have an expiration?</span> -->
    <div class="form-check form-switch my-2">
      <input class="form-check-input" type="checkbox" id="has_expiration">
      <label class="form-check-label fw-bold" for="has_expiration">Does it have an expiry date?</label>
    </div>
    <div id="dateInputContainer">
      <label for="todo_expiration_update"><h3>Expiration Date:</h3></label>
      <div>
        <input type="date" name="todo_expiration_update" id="todo_expiration_update">
      </div>
    </div>
    <div class="d-flex justify-content-end gap-2 my-1">
      <a href="/todo_list_tool/{{ current_user.id }}" class="btn btn-sm btn-light">Cancel</a>
      <button type="submit" class="btn btn-sm btn-primary">Save</button>
    </div>
  </form> 
</div>
<script>
  const dateInputContainer = document.getElementById("dateInputContainer");

  document.getElementById("has_expiration").addEventListener("change", function() {
    let hasExpiration = this.checked ? true : false;
    alert(hasExpiration)
    dateInputContainer.style.display = hasExpiration ? "block" : "none";
  });
</script>
{% endblock %}	
